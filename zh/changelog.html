<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>goInception 更新日志 | goInception使用文档</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="goInception是一个集审核、执行、备份及生成回滚语句于一身的MySQL运维工具">
    
    <link rel="preload" href="/goInception/assets/css/0.styles.b57c7c20.css" as="style"><link rel="preload" href="/goInception/assets/js/app.35e44c5d.js" as="script"><link rel="preload" href="/goInception/assets/js/3.a468a5ac.js" as="script"><link rel="preload" href="/goInception/assets/js/38.95671f5a.js" as="script"><link rel="prefetch" href="/goInception/assets/js/10.44eb2437.js"><link rel="prefetch" href="/goInception/assets/js/11.05fdc934.js"><link rel="prefetch" href="/goInception/assets/js/12.5c06c266.js"><link rel="prefetch" href="/goInception/assets/js/13.bbd07852.js"><link rel="prefetch" href="/goInception/assets/js/14.222eb434.js"><link rel="prefetch" href="/goInception/assets/js/15.1cb8c282.js"><link rel="prefetch" href="/goInception/assets/js/16.6124a5c8.js"><link rel="prefetch" href="/goInception/assets/js/17.7b28b5b1.js"><link rel="prefetch" href="/goInception/assets/js/18.f6a993f8.js"><link rel="prefetch" href="/goInception/assets/js/19.caafd667.js"><link rel="prefetch" href="/goInception/assets/js/20.21a5c394.js"><link rel="prefetch" href="/goInception/assets/js/21.c7454f11.js"><link rel="prefetch" href="/goInception/assets/js/22.c2b2daca.js"><link rel="prefetch" href="/goInception/assets/js/23.d15fb4c3.js"><link rel="prefetch" href="/goInception/assets/js/24.f9fc20d1.js"><link rel="prefetch" href="/goInception/assets/js/25.7c473ba8.js"><link rel="prefetch" href="/goInception/assets/js/26.e910ea3c.js"><link rel="prefetch" href="/goInception/assets/js/27.7e628298.js"><link rel="prefetch" href="/goInception/assets/js/28.e23b8266.js"><link rel="prefetch" href="/goInception/assets/js/29.e351c224.js"><link rel="prefetch" href="/goInception/assets/js/30.11de2771.js"><link rel="prefetch" href="/goInception/assets/js/31.3bf72658.js"><link rel="prefetch" href="/goInception/assets/js/32.d8822cad.js"><link rel="prefetch" href="/goInception/assets/js/33.d4d8a1ce.js"><link rel="prefetch" href="/goInception/assets/js/34.bd66eb0b.js"><link rel="prefetch" href="/goInception/assets/js/35.206cd400.js"><link rel="prefetch" href="/goInception/assets/js/36.c789dffd.js"><link rel="prefetch" href="/goInception/assets/js/37.4ba29217.js"><link rel="prefetch" href="/goInception/assets/js/39.4e46b7ce.js"><link rel="prefetch" href="/goInception/assets/js/4.edffa37c.js"><link rel="prefetch" href="/goInception/assets/js/40.789c8cb7.js"><link rel="prefetch" href="/goInception/assets/js/41.d4792fc5.js"><link rel="prefetch" href="/goInception/assets/js/42.45c371f3.js"><link rel="prefetch" href="/goInception/assets/js/43.e30bc9ac.js"><link rel="prefetch" href="/goInception/assets/js/44.c6fe8287.js"><link rel="prefetch" href="/goInception/assets/js/45.6a810bc3.js"><link rel="prefetch" href="/goInception/assets/js/46.6ad33969.js"><link rel="prefetch" href="/goInception/assets/js/47.14da7ce7.js"><link rel="prefetch" href="/goInception/assets/js/48.d03fb0bb.js"><link rel="prefetch" href="/goInception/assets/js/49.e2b534ae.js"><link rel="prefetch" href="/goInception/assets/js/5.264a70d7.js"><link rel="prefetch" href="/goInception/assets/js/50.16ca0037.js"><link rel="prefetch" href="/goInception/assets/js/51.3f01183e.js"><link rel="prefetch" href="/goInception/assets/js/52.97fd4f1e.js"><link rel="prefetch" href="/goInception/assets/js/6.43094ae0.js"><link rel="prefetch" href="/goInception/assets/js/7.d744fe65.js"><link rel="prefetch" href="/goInception/assets/js/8.0f8f0b66.js"><link rel="prefetch" href="/goInception/assets/js/9.83817072.js"><link rel="prefetch" href="/goInception/assets/js/vendors~docsearch.6cb0424f.js">
    <link rel="stylesheet" href="/goInception/assets/css/0.styles.b57c7c20.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/goInception/zh/" class="home-link router-link-active"><!----> <span class="site-name">goInception使用文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/goInception/changelog.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/goInception/zh/changelog.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/hanchuanchuan/goInception" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/goInception/changelog.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/goInception/zh/changelog.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/hanchuanchuan/goInception" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/goInception/zh/" aria-current="page" class="sidebar-link">介绍</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开始</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/goInception/zh/install.html" class="sidebar-link">安装</a></li><li><a href="/goInception/zh/params.html" class="sidebar-link">调用选项</a></li><li><a href="/goInception/zh/demo.html" class="sidebar-link">使用示例</a></li><li><a href="/goInception/zh/result.html" class="sidebar-link">结果集说明</a></li><li><a href="/goInception/zh/config.html" class="sidebar-link">config.toml说明</a></li><li><a href="/goInception/zh/permission.html" class="sidebar-link">权限说明</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>配置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/goInception/zh/options.html" class="sidebar-link">审核选项</a></li><li><a href="/goInception/zh/rules.html" class="sidebar-link">审核规则</a></li><li><a href="/goInception/zh/backup.html" class="sidebar-link">备份功能</a></li><li><a href="/goInception/zh/osc.html" class="sidebar-link">DDL变更:pt-osc</a></li><li><a href="/goInception/zh/ghost.html" class="sidebar-link">DDL变更:gh-ost</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/goInception/zh/levels.html" class="sidebar-link">自定义审核级别</a></li><li><a href="/goInception/zh/kill_stmt.html" class="sidebar-link">KILL操作</a></li><li><a href="/goInception/zh/statistics.html" class="sidebar-link">统计功能</a></li><li><a href="/goInception/zh/tree.html" class="sidebar-link">语法树打印</a></li><li><a href="/goInception/zh/trans.html" class="sidebar-link">事务</a></li><li><a href="/goInception/zh/safe.html" class="sidebar-link">用户管理/鉴权</a></li><li><a href="/goInception/zh/diff.html" class="sidebar-link">对比inception</a></li></ul></section></li><li><a href="/goInception/zh/support.html" class="sidebar-link">赞助&amp;定制</a></li><li><a href="/goInception/zh/changelog.html" aria-current="page" class="active sidebar-link">更新日志</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-2-5-2021-10-31" class="sidebar-link">[v1.2.5] - 2021-10-31</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-2-4-2020-12-19" class="sidebar-link">[v1.2.4] - 2020-12-19</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-2-3-2020-05-22" class="sidebar-link">[v1.2.3] - 2020-05-22</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-2-2-2020-04-04" class="sidebar-link">[v1.2.2] - 2020-04-04</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-2-1-2020-03-07" class="sidebar-link">[v1.2.1] - 2020-03-07</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-2-0-2020-01-18" class="sidebar-link">[v1.2.0] - 2020-01-18</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-6-2020-01-02" class="sidebar-link">[v1.1.6] - 2020-01-02</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-5-2019-12-09" class="sidebar-link">[v1.1.5] - 2019-12-09</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-4-2019-11-21" class="sidebar-link">[v1.1.4] - 2019-11-21</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-3-2019-11-13" class="sidebar-link">[v1.1.3] - 2019-11-13</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-2-2019-10-30" class="sidebar-link">[v1.1.2] - 2019-10-30</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-1-2019-10-13" class="sidebar-link">[v1.1.1] - 2019-10-13</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-1-0-2019-9-7" class="sidebar-link">[v1.1.0] - 2019-9-7</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-5-2019-8-20" class="sidebar-link">[v1.0.5] - 2019-8-20</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-4-2019-8-5" class="sidebar-link">[v1.0.4] - 2019-8-5</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-3-2019-7-29" class="sidebar-link">[v1.0.3] - 2019-7-29</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-2-2019-7-26" class="sidebar-link">[v1.0.2] - 2019-7-26</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-1-2019-7-20" class="sidebar-link">[v1.0.1] - 2019-7-20</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-2019-7-15" class="sidebar-link">[v1.0] - 2019-7-15</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-rc4-2019-7-9" class="sidebar-link">[v1.0-rc4] - 2019-7-9</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-rc3-2019-7-2" class="sidebar-link">[v1.0-rc3] - 2019-7-2</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-rc2-2019-6-21" class="sidebar-link">[v1.0-rc2] - 2019-6-21</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v1-0-rc1-2019-6-12" class="sidebar-link">[v1.0-rc1] - 2019-6-12</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-9-beta-2019-6-4" class="sidebar-link">[v0.9-beta] - 2019-6-4</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-8-3-beta-2019-5-30" class="sidebar-link">[v0.8.3-beta] - 2019-5-30</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-8-2-beta-2019-5-27" class="sidebar-link">[v0.8.2-beta] - 2019-5-27</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-8-1-beta-2019-5-24" class="sidebar-link">[v0.8.1-beta] - 2019-5-24</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-8-beta-2019-5-22" class="sidebar-link">[v0.8-beta] - 2019-5-22</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-7-5-beta-2019-5-17" class="sidebar-link">[v0.7.5-beta] - 2019-5-17</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-7-4-beta-2019-5-12" class="sidebar-link">[v0.7.4-beta] - 2019-5-12</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-7-3-beta-2019-5-10" class="sidebar-link">[v0.7.3-beta] - 2019-5-10</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-7-2-beta-2019-5-7" class="sidebar-link">[v0.7.2-beta] - 2019-5-7</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-7-1-beta-2019-5-4" class="sidebar-link">[v0.7.1-beta] - 2019-5-4</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-7-beta-2019-4-26" class="sidebar-link">[v0.7-beta] - 2019-4-26</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-6-4-beta-2019-4-23" class="sidebar-link">[v0.6.4-beta] - 2019-4-23</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-6-3-beta-2019-4-22" class="sidebar-link">[v0.6.3-beta] - 2019-4-22</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-6-2-beta-2019-4-18" class="sidebar-link">[v0.6.2-beta] - 2019-4-18</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-6-1-beta-2019-4-9" class="sidebar-link">[v0.6.1-beta] - 2019-4-9</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-6-beta-2019-4-3" class="sidebar-link">[v0.6-beta] - 2019-4-3</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-5-3-beta-2019-3-25" class="sidebar-link">[v0.5.3-beta] - 2019-3-25</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-5-2-beta-2019-3-17" class="sidebar-link">[v0.5.2-beta] - 2019-3-17</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-5-1-beta-2019-3-14" class="sidebar-link">[v0.5.1-beta] - 2019-3-14</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-5-beta-2019-3-10" class="sidebar-link">[v0.5-beta] - 2019-3-10</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-4-1-beta-2019-3-6" class="sidebar-link">[v0.4.1-beta] - 2019-3-6</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-4-beta-2019-3-5" class="sidebar-link">[v0.4-beta] - 2019-3-5</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-3-beta-2019-2-13" class="sidebar-link">[v0.3-beta] - 2019-2-13</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-2-beta-2019-1-31" class="sidebar-link">[v0.2-beta] - 2019-1-31</a></li><li class="sidebar-sub-header"><a href="/goInception/zh/changelog.html#v0-1-beta-2019-1-25" class="sidebar-link">[v0.1-beta] - 2019-1-25</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="goinception-更新日志"><a href="#goinception-更新日志" class="header-anchor">#</a> goInception 更新日志</h1> <h2 id="v1-2-5-2021-10-31"><a href="#v1-2-5-2021-10-31" class="header-anchor">#</a> [v1.2.5] - 2021-10-31</h2> <h3 id="fix"><a href="#fix" class="header-anchor">#</a> Fix</h3> <ul><li>修复gh-ost的ghost_initially_drop_socket_file 参数不生效的问题 (#382)</li> <li>修复索引前缀中文英文不一致的问题 (#380)</li> <li>修复受影响行数可能溢出的问题 (#375)</li> <li>修复bit类型默认值设置为NULL时无法审核通过的问题 (#346)</li> <li>修复pt-osc连接非3306端口时执行失败的问题 (#335)</li> <li>修复tidb v4.0版本dml无法审核的bug</li> <li>修复dml回滚语句未忽略计算列的问题(#324)</li> <li>修复rename table语法一次修改多个表名时，有表名逻辑上不生效的问题 (#327)</li></ul> <h3 id="new-features"><a href="#new-features" class="header-anchor">#</a> New Features</h3> <ul><li>新增 <code>check_identifier_lower</code> 参数，用于打开表名、列名、索引名小写需求 (#389)</li> <li>添加<code>masking功能</code>-语法树解析功能升级,返回select涉及的对象(库.表.列) (#355)</li> <li>添加ghost_bin_dir参数设置来自切换gh-ost模式,<code>独立gh-ost模块</code>,采用binary方式调用以优化ddl高并发且kill gh-ost进程时可能出现的bug (#334)</li> <li>添加选项<code>max_execution_time</code>设置会话级DML语句的最大执行时间 (#319)</li> <li>添加<code>enable_any_statement</code>选项以支持所有语法均可执行 (#301)</li></ul> <h3 id="update"><a href="#update" class="header-anchor">#</a> Update</h3> <ul><li>优化alter table修改列子句的关键字审核逻辑 (#392)</li> <li>优化group by子句审核逻辑 (#385)</li> <li>添加datetime小数秒校验 (#369)</li> <li>添加视图对union的支持</li> <li>微调严格模式下的insert列值检查逻辑</li> <li>优化字符类型长度审核逻辑</li> <li>优化数据库连接超时时的处理(#306)</li> <li>完善字符集和排序规则审核逻辑,添加utf8mb4_0900_ai_ci排序规则支持</li></ul> <h2 id="v1-2-4-2020-12-19"><a href="#v1-2-4-2020-12-19" class="header-anchor">#</a> [v1.2.4] - 2020-12-19</h2> <h3 id="fix-2"><a href="#fix-2" class="header-anchor">#</a> Fix</h3> <ul><li>修复MariaDB可能出现dml未备份成功的问题</li> <li>修复update指定表别名时审核错误的问题 (#249)</li> <li>修复select列中子查询可能找不到父表列和having子句可能找不到列的问题 (#266)</li> <li>修复未按正确格式调用时误报error的问题</li> <li>修复<code>inception set</code>语法指定float类型参数会报错的问题 (#279)</li> <li>修复未正确解析备份语句时的状态标计 (#286)</li></ul> <h3 id="new-features-2"><a href="#new-features-2" class="header-anchor">#</a> New Features</h3> <ul><li>添加lock_wait_timeout,控制普通SQL 执行时的锁等待超时时间 (#224)</li> <li>增加 pt-osc 的 sleep 参数,以优化低配 db 执行 ddl 变更时的负载情况 (#260)</li> <li>添加视图支持 (#238,#262)</li> <li>添加参数<code>ignore_osc_alter_stmt</code>配置强制忽略osc检查的语法 (#258,#263)</li> <li>添加CREATE TABLE AS SELECT语法支持 (#246,#264)</li> <li>添加tidb列属性auto_random支持 (#270)</li> <li>增加 inc 执行时设置 sql_mode 选项 (#267)</li> <li>insert时添加非法日期审核 (#277)</li></ul> <h3 id="update-2"><a href="#update-2" class="header-anchor">#</a> Update</h3> <ul><li>优化索引可见性审核对于多版本数据库的支持 (#247)</li> <li>优化备份功能的binlog解析 (#250)</li> <li>完善MySQL8.0关键字列表 (#210)</li> <li>优化默认数据库的配置,指定--db选项后可省略use操作</li> <li>优化osc进程处理逻辑,添加并发锁处理</li> <li>完善alter table表分区语法 (#281)</li> <li>优化当开启ssl时的备份功能处理 (#287)</li></ul> <h2 id="v1-2-3-2020-05-22"><a href="#v1-2-3-2020-05-22" class="header-anchor">#</a> [v1.2.3] - 2020-05-22</h2> <h3 id="fix-3"><a href="#fix-3" class="header-anchor">#</a> Fix</h3> <ul><li>fix: 修复pt-osc在获取表锁卡住时无法kill的问题 (#213, #222)</li></ul> <h3 id="new-features-3"><a href="#new-features-3" class="header-anchor">#</a> New Features</h3> <ul><li>添加参数<code>ignore_sighup</code>,默认忽略终端连接断开信号 (#195)</li> <li>添加<code>osc_lock_wait_timeout</code>参数, 控制pt-osc等待meta lock时间，默认60s (#214, #215)</li> <li>支持多个自定义索引前缀 (#204)</li></ul> <h3 id="update-3"><a href="#update-3" class="header-anchor">#</a> Update</h3> <ul><li>完善MySQL5.7关键字列表 (#210)</li></ul> <h2 id="v1-2-2-2020-04-04"><a href="#v1-2-2-2020-04-04" class="header-anchor">#</a> [v1.2.2] - 2020-04-04</h2> <h3 id="fix-4"><a href="#fix-4" class="header-anchor">#</a> Fix</h3> <ul><li>修复<code>max_char_length</code>未指定时误审核的问题</li> <li>修复索引列长度限制不准确的问题 (#176)</li> <li>修复inception set命令返回错误的问题,修复lang设置可能不生效的问题</li> <li>修复在开启事务时,DDL和DML混合执行时可能出错的问题 (#182)</li></ul> <h3 id="new-features-4"><a href="#new-features-4" class="header-anchor">#</a> New Features</h3> <ul><li>添加会话级变量设置 (#157, #166, #167)</li> <li>添加osc参数<code>osc_max_flow_ctl</code>,以便PXC集群启用pt-osc功能 (#170, #172)</li> <li>添加审核项<code>columns_must_have_index</code>, 指定列必须添加索引 (#174, #175)</li></ul> <h3 id="update-4"><a href="#update-4" class="header-anchor">#</a> Update</h3> <ul><li>优化列的字符集和排序规则审核逻辑 (#173)</li> <li>添加where条件中的值表达式审核,避免无效表达式误更新 (#178)</li> <li>优化鉴权失败时打印部分须特权执行的内部SQL,以便问题快速定位</li></ul> <h2 id="v1-2-1-2020-03-07"><a href="#v1-2-1-2020-03-07" class="header-anchor">#</a> [v1.2.1] - 2020-03-07</h2> <h3 id="fix-5"><a href="#fix-5" class="header-anchor">#</a> Fix</h3> <ul><li>优化使用pt工具时ALTER语句前后的注释可能导致其解析失败的问题</li></ul> <h3 id="new-features-5"><a href="#new-features-5" class="header-anchor">#</a> New Features</h3> <ul><li>系统变量中添加版本号信息 <code>show variables like 'version'</code> (#164)</li></ul> <h3 id="update-5"><a href="#update-5" class="header-anchor">#</a> Update</h3> <ul><li>在开启获取真实受影响行数参数时,忽略sql指纹功能(准确性优先)</li> <li>自动移除每行SQL行首行尾的特殊空格(ASCII码160)</li> <li>优化bit类型默认值审核,现已支持如<code>b'1'</code>的审核</li> <li>优化未正确配置数据源时的错误提示,使之更友好</li> <li>缓存建表时唯一键的设置</li> <li>完善数值类型的显示宽度审核 (#162)</li></ul> <h2 id="v1-2-0-2020-01-18"><a href="#v1-2-0-2020-01-18" class="header-anchor">#</a> [v1.2.0] - 2020-01-18</h2> <h3 id="fix-6"><a href="#fix-6" class="header-anchor">#</a> Fix</h3> <ul><li>修复change column修改列名并立即引用旧列名时未正确审核的bug (#150)</li> <li>修复使用year类型错误长度时未正确审核的问题</li> <li>修复join语法ON子句审核逻辑不正确的问题</li></ul> <h3 id="new-features-6"><a href="#new-features-6" class="header-anchor">#</a> New Features</h3> <ul><li>表名和索引名前缀自定义 (#149)
<ul><li>表名前缀 <code>table_prefix</code>, 默认为空,即不限制</li> <li>索引前缀 <code>index_prefix</code> ,默认为<code>idx_</code>,和之前版本保持一致,可自定义</li> <li>唯一索引前缀 <code>uniq_index_prefix</code> ,默认为<code>uniq_</code>,和之前版本保持一致,可自定义</li></ul></li></ul> <h3 id="update-6"><a href="#update-6" class="header-anchor">#</a> Update</h3> <ul><li>优化使用pt工具时的alter子句解析</li> <li>优化gh-ost和备份功能的日志输出,调整为统一格式</li> <li>优化默认数据库的参数设置,由默认<code>mysql</code>库调整为默认为空,以避免特殊情况下影响主从同步</li></ul> <h2 id="v1-1-6-2020-01-02"><a href="#v1-1-6-2020-01-02" class="header-anchor">#</a> [v1.1.6] - 2020-01-02</h2> <h3 id="fix-7"><a href="#fix-7" class="header-anchor">#</a> Fix</h3> <ul><li>修复timestamp类型开关审核不正确的问题</li> <li>修复实例未开启autocommit时DML操作未正确提交的bug (#146)</li></ul> <h3 id="new-features-7"><a href="#new-features-7" class="header-anchor">#</a> New Features</h3> <ul><li>添加用户鉴权模块,实现用户管理,安全连接功能 (#132)</li> <li>添加<a href="/goInception/zh/trans.html">事务支持</a>(批量执行) (#135)</li></ul> <h3 id="update-7"><a href="#update-7" class="header-anchor">#</a> Update</h3> <ul><li>优化列类型变更审核 (#121)</li> <li>实现update set多表时的回滚支持 (#112,#136)</li> <li>优化区分大小写时的审核规则 (#123)</li> <li>优化使用pt-osc工具时的alter子句拆分逻辑 (#142)</li></ul> <h2 id="v1-1-5-2019-12-09"><a href="#v1-1-5-2019-12-09" class="header-anchor">#</a> [v1.1.5] - 2019-12-09</h2> <h3 id="update-8"><a href="#update-8" class="header-anchor">#</a> Update</h3> <ul><li>优化对象名大小写审核逻辑</li> <li>优化索引长度审核准确性</li> <li>支持update多表更新语法(暂不支持多表回滚) (#112)</li> <li>优化sql语法解析失败时的错误信息</li></ul> <h2 id="v1-1-4-2019-11-21"><a href="#v1-1-4-2019-11-21" class="header-anchor">#</a> [v1.1.4] - 2019-11-21</h2> <h3 id="fix-8"><a href="#fix-8" class="header-anchor">#</a> Fix</h3> <ul><li>修复非空字段insert时对自增列的处理 (#113)</li> <li>修复alter table rename语句的回滚SQL生成错误问题</li> <li>修复在开启<code>real_row_count</code>选项时,DML转select count时未处理limit的问题 (#119)</li></ul> <h3 id="new-features-8"><a href="#new-features-8" class="header-anchor">#</a> New Features</h3> <ul><li>添加新参数 <code>hex_blob</code> ,以支持回滚时解析二进制类型 (#118)</li></ul> <h2 id="v1-1-3-2019-11-13"><a href="#v1-1-3-2019-11-13" class="header-anchor">#</a> [v1.1.3] - 2019-11-13</h2> <h3 id="fix-9"><a href="#fix-9" class="header-anchor">#</a> Fix</h3> <ul><li>修复表内有text,json等[]byte类型字段时最小化生成回滚语句panic的问题 (#105,#107)</li> <li>修复<code>decimal</code>类型逆向解析时变为科学计数法形式的问题 (#106,#108)</li> <li>修复多线程高并发测试时解析调用参数出现线程安全问题的bug (#103)</li></ul> <h3 id="new-features-9"><a href="#new-features-9" class="header-anchor">#</a> New Features</h3> <ul><li>添加审核选项 <code>check_implicit_type_conversion</code> ,审核where条件中的隐式类型转换 (#101)</li></ul> <h3 id="update-9"><a href="#update-9" class="header-anchor">#</a> Update</h3> <ul><li>添加TiDB数据库判断(不支持tidb备份)</li> <li>添加未指定表前缀时的字段歧义审核</li></ul> <h2 id="v1-1-2-2019-10-30"><a href="#v1-1-2-2019-10-30" class="header-anchor">#</a> [v1.1.2] - 2019-10-30</h2> <h3 id="fix-10"><a href="#fix-10" class="header-anchor">#</a> Fix</h3> <ul><li>修复线程号超出uint32范围时无法备份的问题</li></ul> <h3 id="new-features-10"><a href="#new-features-10" class="header-anchor">#</a> New Features</h3> <ul><li>添加设置参数 <code>enable_minimal_rollback</code>, 用以开启最小化回滚SQL设置 (#90)</li> <li>添加设置参数 <code>wait_timeout</code>, 用以设置远端数据库等待超时时间,默认为0,即保持数据库设置</li> <li>添加mysql安全连接参数设置 <code>--ssl</code>等, 可配置SSL或CA证书验证 (#92)</li></ul> <h2 id="v1-1-1-2019-10-13"><a href="#v1-1-1-2019-10-13" class="header-anchor">#</a> [v1.1.1] - 2019-10-13</h2> <h3 id="fix-11"><a href="#fix-11" class="header-anchor">#</a> Fix</h3> <ul><li>修复TiDB数据库explain出错的问题 (#86)</li> <li>修复<code>insert select</code>语法在有删除列时列数校验可能不准确的问题</li></ul> <h3 id="new-features-11"><a href="#new-features-11" class="header-anchor">#</a> New Features</h3> <ul><li>添加审核选项 <code>explain_rule</code> ,用以设置explain获取受影响行数方式</li></ul> <h3 id="update-10"><a href="#update-10" class="header-anchor">#</a> Update</h3> <ul><li>完善<code>spatial index</code>审核规则</li> <li>调整update语法均进行逻辑审核</li> <li>添加join语法的ON子句审核</li> <li>优化delete审核规则,有新表时跳过explain审核</li> <li>远程数据库无法连接时,优化返回结果,添加sql内容返回</li></ul> <h2 id="v1-1-0-2019-9-7"><a href="#v1-1-0-2019-9-7" class="header-anchor">#</a> [v1.1.0] - 2019-9-7</h2> <h3 id="fix-12"><a href="#fix-12" class="header-anchor">#</a> Fix</h3> <ul><li>修复add column操作未命中<code>merge_alter_table</code>检测的问题 (#79)</li></ul> <h3 id="new-features-12"><a href="#new-features-12" class="header-anchor">#</a> New Features</h3> <ul><li>添加空间类型语法解析,添加空间索引支持</li> <li>添加新的调用选项<code>--db</code>,用以设置默认连接的数据库,默认值为<code>mysql</code></li></ul> <h3 id="update-11"><a href="#update-11" class="header-anchor">#</a> Update</h3> <ul><li>支持建库时同时创建表等操作 (#77)</li> <li>优化DDL回滚细节,对alter table多条子句调整回滚SQL为逆向 (#76)</li> <li>在执行前添加数据库只读状态判断</li> <li>优化索引总长度审核,现在基于目标库<code>innodb_large_prefix</code>参数判断</li> <li>审核select语法中的星号列</li> <li>优化多语句拆分解析逻辑,优化分号末尾但未结束的SQL解析</li> <li>完善列定义中的索引校验</li></ul> <h2 id="v1-0-5-2019-8-20"><a href="#v1-0-5-2019-8-20" class="header-anchor">#</a> [v1.0.5] - 2019-8-20</h2> <h3 id="fix-13"><a href="#fix-13" class="header-anchor">#</a> Fix</h3> <ul><li>修复insert values子句不支持default语法的问题</li></ul> <h3 id="new-features-13"><a href="#new-features-13" class="header-anchor">#</a> New Features</h3> <ul><li>添加参数<code>default_charset</code> 用以设置连接数据库的默认字符集,默认值<code>utf8mb4</code> (解决低版本不支持utf8mb4的问题)</li> <li>添加pt-osc参数<code>osc_check_unique_key_change</code>, 设置pt-osc是否检查唯一索引,默认为<code>true</code></li></ul> <h3 id="update-12"><a href="#update-12" class="header-anchor">#</a> Update</h3> <ul><li>优化回滚功能,添加binlog_row_image设置检查,为minimal时自动修改会话级别为full</li></ul> <h2 id="v1-0-4-2019-8-5"><a href="#v1-0-4-2019-8-5" class="header-anchor">#</a> [v1.0.4] - 2019-8-5</h2> <h3 id="new-features-14"><a href="#new-features-14" class="header-anchor">#</a> New Features</h3> <ul><li>添加set names语法支持 (#69)</li></ul> <h3 id="update-13"><a href="#update-13" class="header-anchor">#</a> Update</h3> <ul><li>优化主键索引审核信息 (#67)</li> <li>完善<code>update set</code>多字段审核规则,为set多列and语法添加警告</li> <li>优化gh-ost socket文件名生成规则,避免长度溢出导致创建失败</li> <li>完善外键审核规则 (#68,#70)</li></ul> <h2 id="v1-0-3-2019-7-29"><a href="#v1-0-3-2019-7-29" class="header-anchor">#</a> [v1.0.3] - 2019-7-29</h2> <h3 id="fix-14"><a href="#fix-14" class="header-anchor">#</a> Fix</h3> <ul><li><code>[gh-ost]</code> 修复gh-ost在异常时没有断开binlog dump连接的问题</li> <li><code>[gh-ost]</code> 修复gh-ost当添加datetime列且默认值current_timestamp时,增量数据因时区导致数据错误的问题(timestamp列是正常的)</li></ul> <h3 id="new-features-15"><a href="#new-features-15" class="header-anchor">#</a> New Features</h3> <ul><li>添加参数 <code>enable_change_column</code> ,设置是否支持change column语法</li> <li>添加调用选项 <code>real_row_count</code>,设置是否通过<code>count(*)</code>获取真正受影响行数.默认值<code>false</code></li></ul> <h3 id="update-14"><a href="#update-14" class="header-anchor">#</a> Update</h3> <ul><li>添加pt-osc执行change column的审核,禁止多条change column操作,以免数据丢失 (pt-osc bug)</li></ul> <h2 id="v1-0-2-2019-7-26"><a href="#v1-0-2-2019-7-26" class="header-anchor">#</a> [v1.0.2] - 2019-7-26</h2> <h3 id="fix-15"><a href="#fix-15" class="header-anchor">#</a> Fix</h3> <ul><li>修复 <code>alter table</code> 命令没有其他选项时能正常通过的bug (#59)</li> <li>修复跨库操作时可能出现备份记录写错备份库的问题</li></ul> <h3 id="new-features-16"><a href="#new-features-16" class="header-anchor">#</a> New Features</h3> <ul><li>添加参数 <code>max_ddl_affect_rows</code>，设置DDL允许的最大受影响行数，默认为<code>0</code>，即不限制</li> <li>添加参数 <code>check_float_double</code> ，为 true 时，警告将 float/double 转成 decimal 数据类型。 默认为 false (#62)</li> <li>添加参数 <code>check_identifier_upper</code> ，限制表名、列名、索引名等必须为大写，默认为<code>false</code> (#63)</li></ul> <h3 id="update-15"><a href="#update-15" class="header-anchor">#</a> Update</h3> <ul><li>优化自定义审核级别实现，移除参数 <code>enable_level</code>，现在自定义审核级别和审核开关设置合并 (#52)</li> <li>升级parser语法解析包，优化列排序规则和分区表语法支持 (#50)</li> <li>优化gh-ost的server_id设置自动变化，避免同一实例重复</li></ul> <h2 id="v1-0-1-2019-7-20"><a href="#v1-0-1-2019-7-20" class="header-anchor">#</a> [v1.0.1] - 2019-7-20</h2> <h3 id="fix-16"><a href="#fix-16" class="header-anchor">#</a> Fix</h3> <ul><li>修复 <code>must_have_columns</code> 参数列类型的大小写兼容问题</li></ul> <h3 id="new-features-17"><a href="#new-features-17" class="header-anchor">#</a> New Features</h3> <ul><li>添加 <code>alter table rename index</code> 语法支持</li> <li>添加参数 <code>enable_zero_date</code>，设置是否支持时间为0值，关闭时强制报错。默认值为 <code>true</code> (#55)</li> <li>添加参数 <code>enable_timestamp_type</code> ，设置是否允许 <code>timestamp</code> 类型字段 (#57)</li> <li>添加 <code>mysql 5.5</code> 版本审核支持 (#54)</li></ul> <h3 id="update-16"><a href="#update-16" class="header-anchor">#</a> Update</h3> <ul><li>优化modify column列信息逻辑保存</li> <li>优化列属性的键定义逻辑保存</li></ul> <h2 id="v1-0-2019-7-15"><a href="#v1-0-2019-7-15" class="header-anchor">#</a> [v1.0] - 2019-7-15</h2> <h3 id="fix-17"><a href="#fix-17" class="header-anchor">#</a> Fix</h3> <ul><li>修复密码中包含特殊字符时pt-osc执行出错的问题</li></ul> <h3 id="new-features-18"><a href="#new-features-18" class="header-anchor">#</a> New Features</h3> <ul><li>添加审核结果级别自定义功能 (#52)</li></ul> <h3 id="update-17"><a href="#update-17" class="header-anchor">#</a> Update</h3> <ul><li>添加delete/update自连接审核支持 (#51)</li> <li>优化binlog回滚时指定的server_id自动变化,避免同一实例重复</li></ul> <h2 id="v1-0-rc4-2019-7-9"><a href="#v1-0-rc4-2019-7-9" class="header-anchor">#</a> [v1.0-rc4] - 2019-7-9</h2> <h3 id="fix-18"><a href="#fix-18" class="header-anchor">#</a> Fix</h3> <ul><li>修复pt-osc可能出现执行成功时但进度不到100%的问题 (#48)</li></ul> <h3 id="new-features-19"><a href="#new-features-19" class="header-anchor">#</a> New Features</h3> <ul><li>增加enable_set_engine、support_engine参数，控制是否允许指定存储引擎以及支持的存储引擎类型 (#47)</li></ul> <h3 id="update-18"><a href="#update-18" class="header-anchor">#</a> Update</h3> <ul><li>优化osc的进程列表,同一会话的osc进程信息延后清除(在会话执行返回后) (#48)</li> <li>优化备份库库名生成逻辑,库名过长时自动截断 (#49)</li> <li>优化delete和update别名审核 (#51)</li></ul> <h2 id="v1-0-rc3-2019-7-2"><a href="#v1-0-rc3-2019-7-2" class="header-anchor">#</a> [v1.0-rc3] - 2019-7-2</h2> <h3 id="fix-19"><a href="#fix-19" class="header-anchor">#</a> Fix</h3> <ul><li>修复使用osc做DDL变更时可能不支持的问题(如<code>alter table t engine='innodb'</code>)</li></ul> <h3 id="new-features-20"><a href="#new-features-20" class="header-anchor">#</a> New Features</h3> <ul><li>添加sleep执行等待功能,降低对线上数据库的影响 (#46)
<ul><li>调用选项 <code>sleep</code> ,执行 <code>sleep_rows</code> 条SQL后休眠多少毫秒,以降低对线上数据库的影响</li> <li>调用选项 <code>sleep_rows</code> ,执行多少条SQL后休眠一次</li></ul></li> <li>添加参数 <code>max_allowed_packet</code> 以支持更长的SQL文本</li> <li>添加参数 <code>skip_sqls</code> 以兼容不同客户端的默认sql</li></ul> <h3 id="update-19"><a href="#update-19" class="header-anchor">#</a> Update</h3> <ul><li>调整备份记录表sql_statement字段类型为mediumtext,并自动兼容旧版本的text类型</li> <li>兼容mysqlclient客户端</li></ul> <h2 id="v1-0-rc2-2019-6-21"><a href="#v1-0-rc2-2019-6-21" class="header-anchor">#</a> [v1.0-rc2] - 2019-6-21</h2> <h3 id="fix-20"><a href="#fix-20" class="header-anchor">#</a> Fix</h3> <ul><li>优化回滚相关表结构,字符集调整为utf8mb4 (<code>历史表结构需要手动调整</code>)</li></ul> <h3 id="update-20"><a href="#update-20" class="header-anchor">#</a> Update</h3> <ul><li>优化审核规则,审核子查询、函数等各种表达式 (#44)</li> <li>优化gh-ost默认生成的socket文件名格式</li> <li>优化日志输出,添加线程号显示</li> <li>binlog解析时添加mariadb判断</li></ul> <h2 id="v1-0-rc1-2019-6-12"><a href="#v1-0-rc1-2019-6-12" class="header-anchor">#</a> [v1.0-rc1] - 2019-6-12</h2> <h3 id="new-features-21"><a href="#new-features-21" class="header-anchor">#</a> New Features</h3> <ul><li>添加split分隔功能 (#42)</li></ul> <h2 id="v0-9-beta-2019-6-4"><a href="#v0-9-beta-2019-6-4" class="header-anchor">#</a> [v0.9-beta] - 2019-6-4</h2> <h3 id="new-features-22"><a href="#new-features-22" class="header-anchor">#</a> New Features</h3> <ul><li>添加统计功能,可通过参数 <code>enable_sql_statistic</code> 启用 (#38)</li> <li>添加参数 <code>check_column_position_change</code> ,可控制是否检查列位置/顺序变更 (#40, #41)</li></ul> <h3 id="update-21"><a href="#update-21" class="header-anchor">#</a> Update</h3> <ul><li>优化使用阿里云RDS和gh-ost时的逻辑,自动设置 <code>assume-master-host</code> 参数 (#39)</li></ul> <h2 id="v0-8-3-beta-2019-5-30"><a href="#v0-8-3-beta-2019-5-30" class="header-anchor">#</a> [v0.8.3-beta] - 2019-5-30</h2> <h3 id="fix-21"><a href="#fix-21" class="header-anchor">#</a> Fix</h3> <ul><li>修复gh-ost的initially-drop-old-table和initially-drop-ghost-table参数支持</li> <li>修复设置osc_min_table_size大于0后无法正常启用osc的bug</li></ul> <h3 id="update-22"><a href="#update-22" class="header-anchor">#</a> Update</h3> <ul><li>兼容语法inception get processlist</li> <li>docker镜像内置pt-osc包(版本3.0.13)</li></ul> <h2 id="v0-8-2-beta-2019-5-27"><a href="#v0-8-2-beta-2019-5-27" class="header-anchor">#</a> [v0.8.2-beta] - 2019-5-27</h2> <h3 id="fix-22"><a href="#fix-22" class="header-anchor">#</a> Fix</h3> <ul><li>fix: 修复binlog解析时对unsigned列溢出值的处理</li> <li>fix: 修复gh-ost执行语句有反引号时报语法错误的bug (#33)</li> <li>fix: 修复kill DDL操作时,返回执行和备份成功的bug,现在会提示执行结果未知了 (#34)</li></ul> <h2 id="v0-8-1-beta-2019-5-24"><a href="#v0-8-1-beta-2019-5-24" class="header-anchor">#</a> [v0.8.1-beta] - 2019-5-24</h2> <h3 id="fix-23"><a href="#fix-23" class="header-anchor">#</a> Fix</h3> <ul><li>修复新建表后,使用大小写不一致的表名时返回表不存在bug</li></ul> <h3 id="new-features-23"><a href="#new-features-23" class="header-anchor">#</a> New Features</h3> <ul><li>添加general_log参数,用以记录全量日志</li></ul> <h3 id="update-23"><a href="#update-23" class="header-anchor">#</a> Update</h3> <ul><li>优化insert select新表的审核规则,现在select新表时也可以审核了</li></ul> <h2 id="v0-8-beta-2019-5-22"><a href="#v0-8-beta-2019-5-22" class="header-anchor">#</a> [v0.8-beta] - 2019-5-22</h2> <h3 id="fix-24"><a href="#fix-24" class="header-anchor">#</a> Fix</h3> <ul><li>修复当开启sql指纹功能时,可能出现把警告误标记为错误的bug</li></ul> <h3 id="update-24"><a href="#update-24" class="header-anchor">#</a> Update</h3> <ul><li>优化子查询审核规则,递归审核所有子查询</li> <li>审核group by语法和聚合函数</li></ul> <h2 id="v0-7-5-beta-2019-5-17"><a href="#v0-7-5-beta-2019-5-17" class="header-anchor">#</a> [v0.7.5-beta] - 2019-5-17</h2> <h3 id="fix-25"><a href="#fix-25" class="header-anchor">#</a> Fix</h3> <ul><li>修复执行阶段kill逻辑,避免kill后备份也中止</li></ul> <h3 id="new-features-24"><a href="#new-features-24" class="header-anchor">#</a> New Features</h3> <ul><li>添加select语法支持</li> <li>添加alter table的ALGORITHM,LOCK,FORCE语法支持</li></ul> <h3 id="update-25"><a href="#update-25" class="header-anchor">#</a> Update</h3> <ul><li>优化update子查询审核</li></ul> <h2 id="v0-7-4-beta-2019-5-12"><a href="#v0-7-4-beta-2019-5-12" class="header-anchor">#</a> [v0.7.4-beta] - 2019-5-12</h2> <h3 id="new-features-25"><a href="#new-features-25" class="header-anchor">#</a> New Features</h3> <ul><li>添加alter table表选项语法支持 (#30)</li> <li>重新设计kill操作支持,支持远端数据库kill和goInception kill命令 (#10)</li></ul> <h2 id="v0-7-3-beta-2019-5-10"><a href="#v0-7-3-beta-2019-5-10" class="header-anchor">#</a> [v0.7.3-beta] - 2019-5-10</h2> <h3 id="fix-26"><a href="#fix-26" class="header-anchor">#</a> Fix</h3> <ul><li>修复在开启备份时,执行错误时偶尔出现的误标记执行/备份成功bug</li></ul> <h3 id="new-features-26"><a href="#new-features-26" class="header-anchor">#</a> New Features</h3> <ul><li>添加<code>check_column_type_change</code>参数，设置是否开启字段类型变更审核,默认<code>开启</code> (#27)</li></ul> <h3 id="update-26"><a href="#update-26" class="header-anchor">#</a> Update</h3> <ul><li>实现insert select * 列数审核</li></ul> <h2 id="v0-7-2-beta-2019-5-7"><a href="#v0-7-2-beta-2019-5-7" class="header-anchor">#</a> [v0.7.2-beta] - 2019-5-7</h2> <h3 id="new-features-27"><a href="#new-features-27" class="header-anchor">#</a> New Features</h3> <ul><li>添加<code>enable_json_type</code>参数，设置是否允许json类型字段 (#26)</li></ul> <h3 id="update-27"><a href="#update-27" class="header-anchor">#</a> Update</h3> <ul><li>实现基于系统变量explicit_defaults_for_timestamp的审核规则</li> <li>优化osc解析,转义密码和alter语句中的特殊字符</li></ul> <h2 id="v0-7-1-beta-2019-5-4"><a href="#v0-7-1-beta-2019-5-4" class="header-anchor">#</a> [v0.7.1-beta] - 2019-5-4</h2> <h3 id="update-28"><a href="#update-28" class="header-anchor">#</a> Update</h3> <ul><li>优化json类型字段处理逻辑，不再检查其默认值和NOT NULL约束 (#7, #22)</li> <li>优化must_have_columns参数值解析</li> <li>优化insert select审核逻辑</li></ul> <h3 id="fix-27"><a href="#fix-27" class="header-anchor">#</a> Fix</h3> <ul><li>修复和完善add column(...)语法支持</li> <li>修复开启osc时,alter语句有多余空格时执行失败的bug</li></ul> <h3 id="new-features-28"><a href="#new-features-28" class="header-anchor">#</a> New Features</h3> <ul><li>添加<code>enable_null_index_name</code>参数，允许不指定索引名 (#25)</li> <li>添加语法树打印功能(beta) (#21)</li></ul> <h2 id="v0-7-beta-2019-4-26"><a href="#v0-7-beta-2019-4-26" class="header-anchor">#</a> [v0.7-beta] - 2019-4-26</h2> <h3 id="update-29"><a href="#update-29" class="header-anchor">#</a> Update</h3> <ul><li>优化update关联新建表时的审核，现在update时可以关联新建表了</li> <li>优化insert 新建 select语法审核，现在可以获取预估受影响行数了</li> <li>审核阶段自动忽略警告，优化审核逻辑</li> <li>优化<code>check_column_default_value</code>的审核逻辑，默认值审核时会跳过主键</li> <li>备份阶段sql过长时会自动截断(比如insert values很多行)，<code>返回警告但不影响执行和备份操作</code></li></ul> <h3 id="fix-28"><a href="#fix-28" class="header-anchor">#</a> Fix</h3> <ul><li>修复开启<code>enable_pk_columns_only_int</code>选项时列类型审核错误的问题</li></ul> <h3 id="new-features-29"><a href="#new-features-29" class="header-anchor">#</a> New Features</h3> <ul><li>添加<code>enable_set_collation</code>参数，设置是否允许指定表和数据库的排序规则</li> <li>添加<code>support_collation</code>参数，设置支持的排序规则,多个时以逗号分隔</li></ul> <h2 id="v0-6-4-beta-2019-4-23"><a href="#v0-6-4-beta-2019-4-23" class="header-anchor">#</a> [v0.6.4-beta] - 2019-4-23</h2> <h3 id="fix-29"><a href="#fix-29" class="header-anchor">#</a> Fix</h3> <ul><li>修复mysql 5.6和mariadb无法获取受影响行数的问题</li></ul> <h2 id="v0-6-3-beta-2019-4-22"><a href="#v0-6-3-beta-2019-4-22" class="header-anchor">#</a> [v0.6.3-beta] - 2019-4-22</h2> <h3 id="new-features-30"><a href="#new-features-30" class="header-anchor">#</a> New Features</h3> <ul><li>添加<code>max_insert_rows</code>参数，设置insert values允许的最大行数。</li> <li>添加<code>must_have_columns</code>参数，用以指定建表时必须创建的列。多个列时以逗号分隔(<code>格式: 列名 [列类型,可选]</code>)</li></ul> <h2 id="v0-6-2-beta-2019-4-18"><a href="#v0-6-2-beta-2019-4-18" class="header-anchor">#</a> [v0.6.2-beta] - 2019-4-18</h2> <h3 id="update-30"><a href="#update-30" class="header-anchor">#</a> Update</h3> <ul><li>添加不支持的语法警告(create table as和create table select)</li> <li>实现alter多子句时的表结构变化支持,如drop column后跟add column</li></ul> <h3 id="fix-30"><a href="#fix-30" class="header-anchor">#</a> Fix</h3> <ul><li>修复explain返回null列时报错的问题</li> <li>修复索引的唯一标识设置错误问题</li></ul> <h2 id="v0-6-1-beta-2019-4-9"><a href="#v0-6-1-beta-2019-4-9" class="header-anchor">#</a> [v0.6.1-beta] - 2019-4-9</h2> <h3 id="update-31"><a href="#update-31" class="header-anchor">#</a> Update</h3> <ul><li>添加远端数据库断开重连机制，优化线程号和master status查询速度</li> <li>优化远端数据库访问操作</li> <li>优化sql内容解析，移除多余分号和空格</li></ul> <h3 id="fix-31"><a href="#fix-31" class="header-anchor">#</a> Fix</h3> <ul><li>修复跨库update时无法找到列的问题</li> <li>修复osc子句有双引号时执行错误的问题</li></ul> <h3 id="new-features-31"><a href="#new-features-31" class="header-anchor">#</a> New Features</h3> <ul><li>添加sql指纹功能
dml语句相似时，可以根据相同的指纹ID复用explain结果，以减少远端数据库explain操作，并提高审核速度
<ul><li>可以通过<code>inception set enable_fingerprint=1;</code>或配置文件开启全局配置</li> <li>也可以通过调用选项<code>--fingerprint=1;</code>开启单个配置</li> <li>两种配置取并集，即开启任一配置，则启用sql指纹功能，默认关闭。</li></ul></li></ul> <h2 id="v0-6-beta-2019-4-3"><a href="#v0-6-beta-2019-4-3" class="header-anchor">#</a> [v0.6-beta] - 2019-4-3</h2> <h3 id="update-32"><a href="#update-32" class="header-anchor">#</a> Update</h3> <ul><li>备份操作性能优化,备份信息改为批量写入</li> <li>添加备份库连接超时检查</li> <li>explain函数性能优化</li> <li>优化部分函数未指定架构名时的默认处理</li> <li>优化默认值检查,添加计算列支持 (#12, #13, #14)</li> <li>优化时间格式和范围检查,根据数据库sql_mode校验零值日期</li> <li>升级到go 1.12</li></ul> <h3 id="fix-32"><a href="#fix-32" class="header-anchor">#</a> Fix</h3> <ul><li>修复index name校验逻辑,其可与列名一致</li> <li>修复timestamp默认值校验不准确的问题</li></ul> <h3 id="new-features-32"><a href="#new-features-32" class="header-anchor">#</a> New Features</h3> <ul><li>添加kill功能支持,在审核和执行时可以kill,备份阶段无法kill (#10)</li> <li>添加<code>check_timestamp_count</code>参数,可配置是否检查current_timestamp数量 (#11, #15)</li></ul> <h2 id="v0-5-3-beta-2019-3-25"><a href="#v0-5-3-beta-2019-3-25" class="header-anchor">#</a> [v0.5.3-beta] - 2019-3-25</h2> <h3 id="update-33"><a href="#update-33" class="header-anchor">#</a> Update</h3> <ul><li>变更列名时使用逻辑校验,避免explain update失败</li> <li>添加union子句校验</li> <li>添加表名别名重复性校验</li></ul> <h3 id="fix-33"><a href="#fix-33" class="header-anchor">#</a> Fix</h3> <ul><li>修复update set子句指定表别名时校验问题</li> <li>修复自增列校验问题</li> <li>修复default value为表达式时的校验问题</li></ul> <h2 id="v0-5-2-beta-2019-3-17"><a href="#v0-5-2-beta-2019-3-17" class="header-anchor">#</a> [v0.5.2-beta] - 2019-3-17</h2> <h3 id="update-34"><a href="#update-34" class="header-anchor">#</a> Update</h3> <ul><li>优化主键NULL列审核规则(审核<code>DEFAULT NULL</code>)</li> <li>优化索引总长度校验,根据列字符集判断字节数长度</li> <li>优化DDL备份对默认值的处理</li></ul> <h2 id="v0-5-1-beta-2019-3-14"><a href="#v0-5-1-beta-2019-3-14" class="header-anchor">#</a> [v0.5.1-beta] - 2019-3-14</h2> <h3 id="update-35"><a href="#update-35" class="header-anchor">#</a> Update</h3> <ul><li>优化option解析规则,密码兼容特殊字符</li> <li>优化语法解析失败时返回的sql语句</li> <li>添加中文的异常和警告信息</li> <li>添加新的参数
<ul><li>lang 设置返回的异常信息语言,可选值 <code>en-US</code>,<code>zh-CN</code>,默认<code>en-US</code></li></ul></li></ul> <h3 id="fix-34"><a href="#fix-34" class="header-anchor">#</a> Fix</h3> <ul><li>修复mariadb备份警告信息重复的问题</li></ul> <h2 id="v0-5-beta-2019-3-10"><a href="#v0-5-beta-2019-3-10" class="header-anchor">#</a> [v0.5-beta] - 2019-3-10</h2> <h3 id="update-36"><a href="#update-36" class="header-anchor">#</a> Update</h3> <ul><li>兼容mariadb v10版本的备份兼容(高并发时回滚语句可能有误，须注意检查)</li> <li>更新pt-osc部分参数名，使其与inception保持一致
<ul><li>osc_critical_running -&gt; osc_critical_thread_running</li> <li>osc_critical_connected -&gt; osc_critical_thread_connected</li> <li>osc_max_running -&gt; osc_max_thread_running</li> <li>osc_max_connected -&gt; osc_max_thread_connected</li></ul></li> <li>隐藏gh-osc部分未使用参数</li> <li>添加是否允许删除数据库参数<code>enable_drop_database</code></li> <li>优化系统变量variables显示和设置</li> <li>调整部分参数默认值
<ul><li>ghost_ok_to_drop_table <code>true</code></li> <li>ghost_skip_foreign_key_checks <code>true</code></li> <li>osc_chunk_size <code>1000</code></li></ul></li></ul> <h3 id="fix-35"><a href="#fix-35" class="header-anchor">#</a> Fix</h3> <ul><li>修复json列校验异常问题 (#7)</li></ul> <h2 id="v0-4-1-beta-2019-3-6"><a href="#v0-4-1-beta-2019-3-6" class="header-anchor">#</a> [v0.4.1-beta] - 2019-3-6</h2> <h3 id="update-37"><a href="#update-37" class="header-anchor">#</a> Update</h3> <ul><li>兼容mariadb数据库(v5.5.60)
<ul><li>添加mariadb的binlog解析支持(测试版本<strong>v5.5.60</strong>,v10版本由于binlog格式改变,暂无法解析thread_id)</li> <li>优化备份失败时的返回信息</li></ul></li></ul> <h2 id="v0-4-beta-2019-3-5"><a href="#v0-4-beta-2019-3-5" class="header-anchor">#</a> [v0.4-beta] - 2019-3-5</h2> <h3 id="new-features-33"><a href="#new-features-33" class="header-anchor">#</a> New Features</h3> <ul><li>添加gh-ost工具支持
<ul><li>无需安装gh-ost,功能内置(v1.0.48)</li> <li>进程列表 <code>inception get osc processlist</code></li> <li>指定进程信息 <code>inception get osc_percent 'sqlsha1'</code></li> <li>进程终止 <code>inception stop alter 'sqlsha1'</code> (同义词<code>inception kill osc 'sqlsha1'</code>)</li> <li>进程暂停 <code>inception pause alter 'sqlsha1'</code> (同义词<code>inception pause osc 'sqlsha1'</code>)</li> <li>进程恢复 <code>inception resume alter 'sqlsha1'</code> (同义词<code>inception resume osc 'sqlsha1'</code>)</li> <li>兼容gh-ost参数 <code>inception show variables like 'ghost%'</code></li></ul></li></ul> <h2 id="v0-3-beta-2019-2-13"><a href="#v0-3-beta-2019-2-13" class="header-anchor">#</a> [v0.3-beta] - 2019-2-13</h2> <h3 id="new-features-34"><a href="#new-features-34" class="header-anchor">#</a> New Features</h3> <ul><li>添加pt-osc工具支持
<ul><li><code>inception get osc processlist</code> 查看osc进程列表</li> <li><code>inception get osc_percent 'sqlsha1'</code> 查看指定的osc进程</li> <li><code>inception stop alter 'sqlsha1'</code> (同义词<code>inception kill osc 'sqlsha1'</code>)中止指定的osc进程</li></ul></li></ul> <h2 id="v0-2-beta-2019-1-31"><a href="#v0-2-beta-2019-1-31" class="header-anchor">#</a> [v0.2-beta] - 2019-1-31</h2> <h3 id="optimizer"><a href="#optimizer" class="header-anchor">#</a> Optimizer</h3> <ul><li><p>优化二进制构建方式，压缩安装包大小</p></li> <li><p>移除vendor依赖，优化GO111MODULE使用方式</p></li> <li><p>跳过权限校验，以避免登陆goInception失败</p></li> <li><p>移除root身份启动校验，以避免windows无法启动</p></li> <li><p>优化inception set变量时的类型校验</p></li></ul> <h2 id="v0-1-beta-2019-1-25"><a href="#v0-1-beta-2019-1-25" class="header-anchor">#</a> [v0.1-beta] - 2019-1-25</h2> <h4 id="goinception正式发布"><a href="#goinception正式发布" class="header-anchor">#</a> goInception正式发布</h4></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/hanchuanchuan/goInception/edit/master/docs/zh/changelog.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2021/10/31下午6:03:15</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/goInception/zh/support.html" class="prev">
        赞助&amp;定制
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/goInception/assets/js/app.35e44c5d.js" defer></script><script src="/goInception/assets/js/3.a468a5ac.js" defer></script><script src="/goInception/assets/js/38.95671f5a.js" defer></script>
  </body>
</html>
