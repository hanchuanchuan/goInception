(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{434:function(v,_,t){"use strict";t.r(_);var e=t(44),o=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"kill操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kill操作"}},[v._v("#")]),v._v(" KILL操作")]),v._v(" "),t("p",[t("strong",[v._v("使用前请连接goInception并使用"),t("code",[v._v("inception show processlist")]),v._v("确认当前阶段("),t("code",[v._v("STATE")]),v._v(")")])]),v._v(" "),t("p",[v._v("阶段分为三种：")]),v._v(" "),t("ul",[t("li",[v._v("CHECKING ("),t("code",[v._v("审核中")]),v._v(")")]),v._v(" "),t("li",[v._v("EXECUTING ("),t("code",[v._v("执行中")]),v._v(")")]),v._v(" "),t("li",[v._v("BACKUP ("),t("code",[v._v("备份中")]),v._v(")")])]),v._v(" "),t("p",[v._v("####KILL操作执行位置")]),v._v(" "),t("ul",[t("li",[v._v("远端数据库,即执行实际sql的数据库")]),v._v(" "),t("li",[v._v("goInception")]),v._v(" "),t("li",[v._v("goInception配置的备份库")])]),v._v(" "),t("h3",{attrs:{id:"goinception-kill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#goinception-kill"}},[v._v("#")]),v._v(" goInception KILL")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("当前阶段")]),v._v(" "),t("th",[v._v("kill后的结果")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("CHECKING")]),v._v(" "),t("td",[v._v("在"),t("code",[v._v("当前语句")]),v._v(" "),t("code",[v._v("审核完成")]),v._v(" 后中止审核，此时仅返回从开始到当前语句的审核结果，后续SQL不再审核")])]),v._v(" "),t("tr",[t("td",[v._v("EXECUTING")]),v._v(" "),t("td",[v._v("在"),t("code",[v._v("当前语句")]),v._v(" "),t("code",[v._v("执行完成")]),v._v(" 后中止执行，如果开启了备份，会执行备份操作，未开启则直接返回")])]),v._v(" "),t("tr",[t("td",[v._v("BACKUP")]),v._v(" "),t("td",[v._v("在"),t("code",[v._v("当前binlog事件")]),v._v(" 解析完成后中止备份，但已生成的回滚语句会继续写入备份库，待写入完成后返回")])])])]),v._v(" "),t("h3",{attrs:{id:"远端数据库kill-不建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#远端数据库kill-不建议"}},[v._v("#")]),v._v(" 远端数据库KILL(不建议)")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("当前阶段")]),v._v(" "),t("th",[v._v("kill后的结果")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("CHECKING")]),v._v(" "),t("td",[v._v("kill操作不会影响审核，连接被kill后会自动重连("),t("code",[v._v("原因是审核失败**不会中止审核**，所以需要重连，并恢复断开的数据库，以避免后续SQL访问错数据库")]),v._v(")")])]),v._v(" "),t("tr",[t("td",[v._v("EXECUTING ("),t("code",[v._v("语句kill后执行失败")]),v._v(")")]),v._v(" "),t("td",[v._v("语句用时过长时，此时kill会直接停止goInception语句的执行，如果开启了备份，会执行备份操作，未开启则直接返回")])]),v._v(" "),t("tr",[t("td",[v._v("EXECUTING ("),t("code",[v._v("语句kill后执行成功，连接断开")]),v._v(")")]),v._v(" "),t("td",[v._v("语句执行比较快时，可能已经执行成功，此时需要根据binlog备份做进一步校验，所以"),t("code",[v._v("依赖备份功能")])])]),v._v(" "),t("tr",[t("td",[v._v("BACKUP")]),v._v(" "),t("td",[t("code",[v._v("<无>")])])])])]),v._v(" "),t("h3",{attrs:{id:"goinception备份库kill-完全不建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#goinception备份库kill-完全不建议"}},[v._v("#")]),v._v(" goInception备份库KILL ("),t("code",[v._v("完全不建议")]),v._v(")")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("当前阶段")]),v._v(" "),t("th",[v._v("kill后的结果")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("CHECKING")]),v._v(" "),t("td",[v._v("在开始备份前会自动检测连接并重连，所以该操作"),t("code",[v._v("无效")])])]),v._v(" "),t("tr",[t("td",[v._v("EXECUTING")]),v._v(" "),t("td",[v._v("在开始备份前会自动检测连接并重连，所以该操作"),t("code",[v._v("无效")])])]),v._v(" "),t("tr",[t("td",[v._v("BACKUP")]),v._v(" "),t("td",[v._v("执行可能成功也可能失败，会导致备份结果不确定，因此"),t("code",[v._v("完全不建议")]),v._v("在备份库执行KILL操作")])])])])])}),[],!1,null,null,null);_.default=o.exports}}]);